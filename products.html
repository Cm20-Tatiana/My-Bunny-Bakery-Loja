<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/92d70a2fd8.js" crossorigin="anonymous"></script>
</head>
    <body>
        <div class="menu-inteiro">
            <div class="menu">
                <div class="logo-container">
                    <img src="imgs/logo.png" alt="Logo" class="logo">
                    <h1 class="bakery-name">MY BUNNY BAKERY</h1>
                </div>
                <div class="nav-links">
                    <a href="index.html">Home</a>
                    <a href="products.html">Loja</a>
                    <a href="aboutus.html">Sobre Nós</a>
                    <a href="contacts.html">Contactos</a>
                </div>
                <div class="cart">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <p id="count">0</p>
                </div>
                <div class="hamburger-menu" id="hamburger-menu">
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                </div>

            </div>
            <div class="mobile-nav-links" id="mobile-nav-links">
                <a href="index.html">Home</a>
                <hr>
                <a href="products.html">Loja</a>
                <hr>
                <a href="aboutus.html">Sobre Nós</a>
                <hr>
                <a href="contacts.html">Contactos</a>
                <hr>
                <div class="cart">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <p id="count">0</p>
                </div>
            </div>
            </div>

        <div class="containerproduct">
            <div class="search-bar">
                <input type="text" id="search" placeholder="Pesquisar produtos..." oninput="searchProducts()">
                <select id="sort" onchange="sortProducts()">
                    <option value="default">Ordenar por</option>
                    <option value="asc">Preço: Menor para Maior</option>
                    <option value="desc">Preço: Maior para Menor</option>
                    <option value="feno">Produtos de Feno</option>
                    <option value="aveia">Produtos de Aveia</option>
                </select>
            </div>
            <div class="container3">
                <div id="root"></div>
                <div class="sidebar">
                    <div class="head">
                        <p>Meu Carrinho</p>
                    </div>
                    <div id="cartItem">O seu carrinho está vazio</div>
                    <div class="foot">
                        <h3>Total</h3>
                        <h2 id="total">0.00 €</h2>
                    </div>
                    <button id="finalizeBtn">Finalizar a Compra</button>
                </div>
            </div>
            <div class="pagination">
                <button onclick="prevPage()">Anterior</button>
                <button onclick="nextPage()">Próxima</button>
            </div>
        </div>

        
        <footer>
            <div class="footer-container">
                <p>Contacte-nos: <a href="contact.html">mybunnybakerypt@gmail.com</a> | <a href="contact.html">+351 969612985</a> </p>
                <p>Segue-nos: <a href="https://www.instagram.com/mybunnybakery.pt?igsh=MWVvNWp2bno4aXVqaw==" target="_blank">Instagram</a></p>
            </div>
        </footer>

        <div id="overlay" class="overlay">
            <div class="overlay-content">
                <img id="overlay-image" src="" alt="Product Image">
                <div id="overlay-text" class="overlay-text"></div>
                <button class="close-button" onclick="closeOverlay()">&times;</button>
            </div>
        </div>

    
        <div id="emailModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <form id="emailForm">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                    <button type="submit">Enviar Pedido</button>
                </form>
            </div>
        </div>

        
        <script>
            document.getElementById('hamburger-menu').addEventListener('click', function() {
                var mobileNavLinks = document.getElementById('mobile-nav-links');
                if (mobileNavLinks.style.display === 'flex') {
                    mobileNavLinks.style.display = 'none';
                } else {
                    mobileNavLinks.style.display = 'flex';
                }
            });

            document.getElementById('finalizeBtn').addEventListener('click', function() {
            document.getElementById('emailModal').style.display = 'block';
        });

        document.querySelector('.close').addEventListener('click', function() {
            document.getElementById('emailModal').style.display = 'none';
        });

        document.getElementById('emailForm').addEventListener('submit', function(event) {
            event.preventDefault();
            sendOrder();
        });

        function sendOrder() {
            const email = document.getElementById('email').value;
            const cartItems = cart.map(item => ({
                name: item.name,
                price: item.price
            }));
            const total = document.getElementById('total').innerText;

            fetch('sendEmail.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    email: email,
                    cartItems: cartItems,
                    total: total
                })
            }).then(response => response.json())
              .then(data => {
                if (data.success) {
                    alert('Pedido enviado com sucesso!');
                    document.getElementById('emailModal').style.display = 'none';
                } else {
                    alert('Erro ao enviar o pedido. Por favor, tente novamente.');
                }
              });
        }
        </script>

        <script src="addtocart.js"></script>
    </body>
</html>
